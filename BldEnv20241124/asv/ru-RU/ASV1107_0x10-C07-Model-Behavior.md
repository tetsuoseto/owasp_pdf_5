# Поведение модели C7, контроль вывода и обеспечение безопасности

## Цель контроля

Выводы модели должны быть структурированными, надежными, безопасными, объяснимыми и постоянно контролироваться в среде эксплуатации. Это снижает вероятность галлюцинаций, утечек конфиденциальной информации, вредоносного контента и неконтролируемых действий, одновременно повышая доверие пользователей и соблюдение нормативных требований.

---

## C7.1 Принудительное соблюдение формата вывода

Жёсткие схемы, ограниченный вывод и последующая проверка останавливают некорректный или вредоносный контент до его распространения.

|   #   | Description                                                                                                                                                                                | Level | Role |
| :---: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :---: | :--: |
| 7.1.1 | Проверьте, что схемы ответов (например, JSON Schema) указаны в системном запросе, и каждый вывод автоматически валидируется; несоответствующие выводы вызывают исправление или отклонение. |   1   | D/V  |
| 7.1.2 | Проверьте, что ограниченный декодинг (стоп-токены, регулярные выражения, максимальное количество токенов) включен для предотвращения переполнения или побочных каналов инъекции подсказок. |   1   | D/V  |
| 7.1.3 | Убедитесь, что последующие компоненты рассматривают выходные данные как недоверенные и проверяют их в соответствии со схемами или безопасными для инъекций десериализаторами.              |   2   | D/V  |
| 7.1.4 | Проверьте, что события некорректного вывода регистрируются, ограничиваются по частоте и отображаются в системах мониторинга.                                                               |   3   |  V   |

---

## C7.2 Обнаружение и смягчение галлюцинаций

Оценка неопределенности и стратегии резервного варианта ограничивают вымышленные ответы.

|   #   | Description                                                                                                                                                                                                             | Level | Role |
| :---: | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :--: |
| 7.2.1 | Проверьте, что логарифмические вероятности на уровне токенов, ансамблевый метод само-согласованности или настройки детекторов галлюцинаций назначают оценку уверенности каждому ответу.                                 |   1   | D/V  |
| 7.2.2 | Проверьте, что ответы ниже настраиваемого порога уверенности запускают резервные рабочие процессы (например, генерацию с дополнительным извлечением информации, использование вторичной модели или проверку человеком). |   1   | D/V  |
| 7.2.3 | Проверьте, что случаи галлюцинаций помечены метаданными с указанием первопричины и передаются в пайплайны для посмертного анализа и дообучения.                                                                         |   2   | D/V  |
| 7.2.4 | Проверьте, что пороги и детекторы перенастроены после значительных обновлений модели или базы знаний.                                                                                                                   |   3   | D/V  |
| 7.2.5 | Проверьте, что визуализации на панели управления отслеживают уровень галлюцинаций.                                                                                                                                      |   3   |  V   |

---

## C7.3 Фильтрация безопасности и конфиденциальности выходных данных

Фильтры политик и охват красной командой защищают пользователей и конфиденциальные данные.

|   #   | Description                                                                                                                                                                                                | Level | Role |
| :---: | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :--: |
| 7.3.1 | Проверьте, что классификаторы до и после генерации блокируют контент, содержащий ненависть, домогательства, самоповреждения, экстремистские и сексуально откровенные материалы в соответствии с политикой. |   1   | D/V  |
| 7.3.2 | Убедитесь, что обнаружение PII/PCI и автоматическое скрытие данных выполняются для каждого ответа; нарушения вызывают инцидент, связанный с конфиденциальностью.                                           |   1   | D/V  |
| 7.3.3 | Проверьте, что метки конфиденциальности (например, коммерческие тайны) распространяются на все модальности, чтобы предотвратить утечку в тексте, изображениях или коде.                                    |   2   |  D   |
| 7.3.4 | Проверьте, что попытки обхода фильтра или классификации с высоким уровнем риска требуют вторичного одобрения или повторной аутентификации пользователя.                                                    |   3   | D/V  |
| 7.3.5 | Проверьте, что пороги фильтрации соответствуют юридическим юрисдикциям и контексту возраста/роли пользователя.                                                                                             |   3   | D/V  |

---

## C7.4 Ограничение вывода и действий

Ограничения скорости и контрольные точки одобрения предотвращают злоупотребления и чрезмерную автономию.

|   #   | Description                                                                                                                                                                                                              | Level | Role |
| :---: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :---: | :--: |
| 7.4.1 | Проверьте, что квоты для каждого пользователя и каждого API-ключа ограничивают количество запросов, токенов и стоимость с использованием экспоненциального увеличения задержки при ошибках 429.                          |   1   |  D   |
| 7.4.2 | Проверьте, что привилегированные действия (запись файлов, выполнение кода, сетевые вызовы) требуют одобрения на основе политики или участия человека в процессе.                                                         |   1   | D/V  |
| 7.4.3 | Проверьте, что проверки кросс-модальной согласованности обеспечивают невозможность использования изображений, кода и текста, сгенерированных по одному и тому же запросу, для скрытой передачи вредоносного содержимого. |   2   | D/V  |
| 7.4.4 | Проверьте, что глубина делегирования агента, лимиты рекурсии и списки разрешённых инструментов явно настроены.                                                                                                           |   2   |  D   |
| 7.4.5 | Проверьте, что нарушение лимитов генерирует структурированные события безопасности для интеграции с SIEM.                                                                                                                |   3   |  V   |

---

## C7.5 Объяснимость вывода

Прозрачные сигналы повышают доверие пользователей и облегчают внутреннее отладку.

|   #   | Description                                                                                                                                                      | Level | Role |
| :---: | ---------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :--: |
| 7.5.1 | Убедитесь, что показатели уверенности, ориентированные на пользователя, или краткие резюме рассуждений отображаются, когда оценка риска считает это необходимым. |   2   | D/V  |
| 7.5.2 | Проверьте, что сгенерированные объяснения не раскрывают конфиденциальные системные подсказки или закрытые данные.                                                |   2   | D/V  |
| 7.5.3 | Проверьте, что система фиксирует логарифмические вероятности на уровне токенов или карты внимания и сохраняет их для авторизованного просмотра.                  |   3   |  D   |
| 7.5.4 | Убедитесь, что артефакты объяснимости находятся под контролем версий вместе с выпусками моделей для обеспечения проверяемости.                                   |   3   |  V   |

---

## C7.6 Интеграция мониторинга

Наблюдаемость в реальном времени замыкает цикл между разработкой и эксплуатацией.

|   #   | Description                                                                                                                                                        | Level | Role |
| :---: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :---: | :--: |
| 7.6.1 | Проверьте, что метрики (нарушения схемы, частота галлюцинаций, токсичность, утечки ПДн, задержка, стоимость) передаются на центральную платформу мониторинга.      |   1   |  D   |
| 7.6.2 | Проверьте, что для каждой метрики безопасности определены пороговые значения оповещений с путями эскалации при дежурстве.                                          |   1   |  V   |
| 7.6.3 | Проверьте, что панели мониторинга связывают аномалии в выходных данных с моделью/версией, флажком функции и изменениями данных на входе.                           |   2   |  V   |
| 7.6.4 | Проверьте, что данные мониторинга возвращаются обратно для дообучения, тонкой настройки или обновления правил в рамках документированного рабочего процесса MLOps. |   2   | D/V  |
| 7.6.5 | Убедитесь, что системы мониторинга проходят тестирование на проникновение и имеют контролируемый доступ, чтобы избежать утечки конфиденциальных журналов.          |   3   |  V   |

---

## 7.7 Механизмы защиты генеративных медиа

Обеспечьте, чтобы системы ИИ не создавали незаконный, вредоносный или несанкционированный медиаконтент, путем применения ограничений политики, проверки вывода и отслеживаемости.

|   #   | Description                                                                                                                                                                                                               | Level | Role |
| :---: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :--: |
| 7.7.1 | Убедитесь, что системные подсказки и инструкции для пользователей явно запрещают создание незаконных, вредоносных или несогласованных дипфейк-медиа (например, изображений, видео, аудио).                                |   1   | D/V  |
| 7.7.2 | Проверьте, что запросы фильтруются на предмет попыток создать имитации личностей, сексуально откровенные дипфейки или материалы с изображением реальных людей без их согласия.                                            |   2   | D/V  |
| 7.7.3 | Проверьте, использует ли система перцептивное хеширование, обнаружение водяных знаков или отпечатки для предотвращения несанкционированного воспроизведения защищённого авторским правом медиа.                           |   2   |  V   |
| 7.7.4 | Проверьте, что все сгенерированные медиафайлы криптографически подписаны, имеют водяные знаки или встроены с защитой от подделки метаданными происхождения для последующей трассируемости.                                |   3   | D/V  |
| 7.7.5 | Убедитесь, что попытки обхода (например, запутывание запросов, сленг, враждебные формулировки) обнаруживаются, регистрируются и ограничиваются по частоте; повторяющееся злоупотребление выводится в системы мониторинга. |   3   |  V   |

## Ссылки

* [NIST AI Risk Management Framework](https://www.nist.gov/itl/ai-risk-management-framework)
* [ISO/IEC 42001:2023 – AI Management System](https://www.iso.org/obp/ui/en/)
* [OWASP Top-10 for Large Language Model Applications (2025)](https://owasp.org/www-project-top-10-for-large-language-model-applications/)
* [Improper Output Handling – OWASP LLM05:2025](https://genai.owasp.org/llmrisk/llm052025-improper-output-handling/)
* [Practical Techniques to Constrain LLM Output](https://mychen76.medium.com/practical-techniques-to-constraint-llm-output-in-json-format-e3e72396c670)
* [Dataiku – Structured Text Generation Guide](https://blog.dataiku.com/your-guide-to-structured-text-generation)
* [VL-Uncertainty: Detecting Hallucinations](https://arxiv.org/abs/2411.11919)
* [HaDeMiF: Hallucination Detection & Mitigation](https://openreview.net/forum?id=VwOYxPScxB)
* [Building Confidence in LLM Outputs](https://www.alkymi.io/data-science-room/building-confidence-in-llm-outputs)
* [Explainable AI & LLMs](https://duncsand.medium.com/explainable-ai-140912d31b3b)
* [LLM Red-Teaming Guide](https://www.confident-ai.com/blog/red-teaming-llms-a-step-by-step-guide)
* [Sensitive Information Disclosure in LLMs](https://virtualcyberlabs.com/llm-sensitive-information-disclosure/)
* [LangChain – Chat Model Rate Limiting](https://python.langchain.com/docs/how_to/chat_model_rate_limiting/)
* [OpenAI Rate-Limit & Exponential Back-off](https://hackernoon.com/openais-rate-limit-a-guide-to-exponential-backoff-for-llm-evaluation)
* [Arize AI – LLM Observability Platform](https://arize.com/)

