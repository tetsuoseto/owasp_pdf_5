# Поведение модели C7, контроль вывода и обеспечение безопасности

## Цель управления

Результаты модели должны быть структурированными, надежными, безопасными, объяснимыми и постоянно контролироваться в производственной среде. Это снижает количество галлюцинаций, утечек конфиденциальной информации, вредоносного контента и неконтролируемых действий, одновременно повышая доверие пользователей и соблюдение нормативных требований.

---

## C7.1 Принудительное соблюдение формата вывода

Строгие схемы, ограниченная декодировка и последующая проверка останавливают некорректный или вредоносный контент до его распространения.

|   #   | Description                                                                                                                                                                                   | Level | Role |
| :---: | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :--: |
| 7.1.1 | Убедитесь, что схемы ответов (например, JSON Schema) указаны в системном запросе, и каждый вывод автоматически проверяется; несоответствующие результаты вызывают исправление или отклонение. |   1   | D/V  |
| 7.1.2 | Убедитесь, что ограниченный декодинг (стоп-токены, регулярные выражения, максимальное количество токенов) включён для предотвращения переполнения или побочных каналов внедрения подсказок.   |   1   | D/V  |
| 7.1.3 | Убедитесь, что последующие компоненты рассматривают выходные данные как ненадежные и проверяют их с помощью схем или десериализаторов, безопасных для предотвращения инъекций.                |   2   | D/V  |
| 7.1.4 | Проверьте, что события неправильного вывода регистрируются, ограничиваются по частоте и отображаются в системе мониторинга.                                                                   |   3   |  V   |

---

## C7.2 Обнаружение и снижение галлюцинаций

Оценка неопределенности и стратегии резервного варианта ограничивают вымышленные ответы.

|   #   | Description                                                                                                                                                                                    | Level | Role |
| :---: | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :--: |
| 7.2.1 | Проверьте, что логарифмические вероятности на уровне токенов, ансамблевый метод самосогласованности или специализированные детекторы галлюцинаций присваивают каждому ответу оценку доверия.   |   1   | D/V  |
| 7.2.2 | Проверьте, что ответы с уровнем доверия ниже настраиваемого порога вызывают резервные рабочие процессы (например, генерация с поддержкой извлечения, вторичная модель или человеческий обзор). |   1   | D/V  |
| 7.2.3 | Убедитесь, что инциденты галлюцинаций помечены метаданными с коренной причиной и передаются в процессы анализа после происшествия и дообучения.                                                |   2   | D/V  |
| 7.2.4 | Проверьте, что пороговые значения и детекторы перенастроены после крупных обновлений модели или базы знаний.                                                                                   |   3   | D/V  |
| 7.2.5 | Проверьте, что визуализации на панели управления отслеживают показатели галлюцинаций.                                                                                                          |   3   |  V   |

---

## C7.3 Фильтрация безопасности и конфиденциальности вывода

Фильтры политики и покрытие красной командой защищают пользователей и конфиденциальные данные.

|   #   | Description                                                                                                                                                                                                      | Level | Role |
| :---: | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :--: |
| 7.3.1 | Проверьте, что классификаторы, работающие до и после генерации, блокируют контент, связанный с ненавистью, домогательствами, самоповреждением, экстремизмом и сексуальным содержанием, соответствующий политике. |   1   | D/V  |
| 7.3.2 | Проверьте, что обнаружение PII/PCI и автоматическое сокрытие данных выполняются в каждом ответе; нарушения вызывают инцидент конфиденциальности.                                                                 |   1   | D/V  |
| 7.3.3 | Проверьте, что теги конфиденциальности (например, коммерческая тайна) распространяются по всем модальностям, чтобы предотвратить утечку в тексте, изображениях или коде.                                         |   2   |  D   |
| 7.3.4 | Убедитесь, что попытки обхода фильтра или классификации высокого риска требуют вторичного одобрения или повторной аутентификации пользователя.                                                                   |   3   | D/V  |
| 7.3.5 | Проверьте, что пороги фильтрации соответствуют юридическим юрисдикциям и контексту возраста/роли пользователя.                                                                                                   |   3   | D/V  |

---

## C7.4 Ограничение вывода и действий

Ограничение скорости и контроль одобрения предотвращают злоупотребления и чрезмерную автономность.

|   #   | Description                                                                                                                                                                                                            | Level | Role |
| :---: | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :--: |
| 7.4.1 | Проверьте, что квоты на пользователя и на API-ключ ограничивают количество запросов, токенов и стоимость с использованием экспоненциального повторного ожидания при ошибках 429.                                       |   1   |  D   |
| 7.4.2 | Проверьте, что привилегированные действия (запись файлов, выполнение кода, сетевые вызовы) требуют утверждения на основе политики или участия человека в процессе.                                                     |   1   | D/V  |
| 7.4.3 | Проверьте, что проверки кросс-модальной согласованности гарантируют, что изображения, код и текст, сгенерированные для одного и того же запроса, не могут использоваться для тайной передачи вредоносного содержимого. |   2   | D/V  |
| 7.4.4 | Убедитесь, что глубина делегирования агента, ограничения рекурсии и списки разрешённых инструментов явно настроены.                                                                                                    |   2   |  D   |
| 7.4.5 | Проверьте, что нарушение ограничений генерирует структурированные события безопасности для интеграции с SIEM.                                                                                                          |   3   |  V   |

---

## C7.5 Объяснимость вывода

Прозрачные сигналы повышают доверие пользователей и облегчают внутреннее отладку.

|   #   | Description                                                                                                                                          | Level | Role |
| :---: | ---------------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :--: |
| 7.5.1 | Проверьте, что выводимые пользователю оценки уверенности или краткие резюме рассуждений отображаются, когда оценка риска это считает целесообразным. |   2   | D/V  |
| 7.5.2 | Убедитесь, что сгенерированные объяснения не раскрывают конфиденциальные системные подсказки или собственные данные.                                 |   2   | D/V  |
| 7.5.3 | Проверьте, что система захватывает логарифмические вероятности на уровне токенов или карты внимания и сохраняет их для авторизованного просмотра.    |   3   |  D   |
| 7.5.4 | Убедитесь, что артефакты объяснимости находятся под управлением версий вместе с выпусками моделей для обеспечения аудируемости.                      |   3   |  V   |

---

## C7.6 Интеграция мониторинга

Непрерывная наблюдаемость в реальном времени замыкает цикл между разработкой и эксплуатацией.

|   #   | Description                                                                                                                                                                   | Level | Role |
| :---: | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :--: |
| 7.6.1 | Проверьте, что метрики (нарушения схемы, уровень галлюцинаций, токсичность, утечки персональных данных, задержка, стоимость) передаются на центральную платформу мониторинга. |   1   |  D   |
| 7.6.2 | Убедитесь, что для каждого показателя безопасности определены пороговые значения оповещений с путями эскалации для ответственных сотрудников.                                 |   1   |  V   |
| 7.6.3 | Проверьте, что панели мониторинга связывают аномалии в выходных данных с моделью/версией, флагом функции и изменениями во входных данных.                                     |   2   |  V   |
| 7.6.4 | Проверьте, что данные мониторинга возвращаются для повторного обучения, донастройки или обновления правил в рамках задокументированного рабочего процесса MLOps.              |   2   | D/V  |
| 7.6.5 | Убедитесь, что каналы мониторинга прошли тестирование на проникновение и контролируются по доступу, чтобы избежать утечки конфиденциальных журналов.                          |   3   |  V   |

---

## 7.7 Меры безопасности генеративных медиа

Обеспечьте, чтобы системы ИИ не генерировали незаконный, вредоносный или неразрешенный медиаконтент путем применения политических ограничений, проверки выходных данных и обеспечения трассируемости.

|   #   | Description                                                                                                                                                                                                              | Level | Role |
| :---: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :---: | :--: |
| 7.7.1 | Убедитесь, что системные подсказки и инструкции для пользователя явно запрещают создание незаконных, вредоносных или неконсентных дипфейк-медиа (например, изображений, видео, аудио).                                   |   1   | D/V  |
| 7.7.2 | Проверьте, что запросы фильтруются на предмет попыток создать имитации личности, сексуально откровенные дипфейки или медиа, изображающие реальных людей без их согласия.                                                 |   2   | D/V  |
| 7.7.3 | Проверьте, что система использует перцептивное хеширование, обнаружение водяных знаков или создание отпечатков для предотвращения несанкционированного воспроизведения защищённого авторским правом медиа.               |   2   |  V   |
| 7.7.4 | Убедитесь, что все сгенерированные медиафайлы криптографически подписаны, имеют водяные знаки или содержат встроенные защищённые от подделки метаданные происхождения для последующей отслеживаемости.                   |   3   | D/V  |
| 7.7.5 | Проверьте, что попытки обхода (например, искажение запросов, жаргон, враждебные формулировки) обнаруживаются, регистрируются и ограничиваются по частоте; повторное злоупотребление отображается в системах мониторинга. |   3   |  V   |

## Ссылки

* [NIST AI Risk Management Framework](https://www.nist.gov/itl/ai-risk-management-framework)
* [ISO/IEC 42001:2023 – AI Management System](https://www.iso.org/obp/ui/en/)
* [OWASP Top-10 for Large Language Model Applications (2025)](https://owasp.org/www-project-top-10-for-large-language-model-applications/)
* [Improper Output Handling – OWASP LLM05:2025](https://genai.owasp.org/llmrisk/llm052025-improper-output-handling/)
* [Practical Techniques to Constrain LLM Output](https://mychen76.medium.com/practical-techniques-to-constraint-llm-output-in-json-format-e3e72396c670)
* [Dataiku – Structured Text Generation Guide](https://blog.dataiku.com/your-guide-to-structured-text-generation)
* [VL-Uncertainty: Detecting Hallucinations](https://arxiv.org/abs/2411.11919)
* [HaDeMiF: Hallucination Detection & Mitigation](https://openreview.net/forum?id=VwOYxPScxB)
* [Building Confidence in LLM Outputs](https://www.alkymi.io/data-science-room/building-confidence-in-llm-outputs)
* [Explainable AI & LLMs](https://duncsand.medium.com/explainable-ai-140912d31b3b)
* [LLM Red-Teaming Guide](https://www.confident-ai.com/blog/red-teaming-llms-a-step-by-step-guide)
* [Sensitive Information Disclosure in LLMs](https://virtualcyberlabs.com/llm-sensitive-information-disclosure/)
* [LangChain – Chat Model Rate Limiting](https://python.langchain.com/docs/how_to/chat_model_rate_limiting/)
* [OpenAI Rate-Limit & Exponential Back-off](https://hackernoon.com/openais-rate-limit-a-guide-to-exponential-backoff-for-llm-evaluation)
* [Arize AI – LLM Observability Platform](https://arize.com/)

