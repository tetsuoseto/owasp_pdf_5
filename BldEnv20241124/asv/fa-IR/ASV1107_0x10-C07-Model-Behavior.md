# رفتار مدل C7، کنترل خروجی و تضمین ایمنی

## هدف کنترل

خروجی‌های مدل باید ساختاریافته، قابل‌اعتماد، ایمن، قابل توضیح و به‌طور مداوم در تولید تحت‌نظارت باشند. انجام این کار باعث کاهش هذیان‌ها، نشت‌های حریم خصوصی، محتوای مضر و اقدامات خارج از کنترل می‌شود و در عین حال اعتماد کاربران و تطابق با مقررات را افزایش می‌دهد.

---

## C7.1 اعمال قالب خروجی

اسکیم‌های سختگیرانه، رمزگشایی محدود شده، و اعتبارسنجی پایین‌دستی محتوای ناقص یا مخرب را قبل از انتشار متوقف می‌کنند.

|   #   | Description                                                                                                                                                                               | Level | Role |
| :---: | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :--: |
| 7.1.1 | اطمینان حاصل کنید که طرح‌واره‌های پاسخ (مثلاً JSON Schema) در فرمان سیستم ارائه شده‌اند و هر خروجی به‌طور خودکار اعتبارسنجی می‌شود؛ خروجی‌های ناسازگار باعث تعمیر یا رد می‌شوند.          |   1   | D/V  |
| 7.1.2 | تأیید کنید که رمزگشایی محدودشده (توکن‌های توقف، عبارات منظم، حداکثر توکن‌ها) فعال باشد تا از سرریز یا کانال‌های جانبی تزریق پرامپت جلوگیری شود.                                           |   1   | D/V  |
| 7.1.3 | اطمینان حاصل کنید که اجزای پایین‌دستی خروجی‌ها را به عنوان داده‌های غیرقابل اعتماد در نظر می‌گیرند و آن‌ها را بر اساس اسکیماها یا سریال‌زدایی‌های ایمن در برابر تزریق اعتبارسنجی می‌کنند. |   2   | D/V  |
| 7.1.4 | اطمینان حاصل کنید که رویدادهای خروجی نادرست ثبت، محدود نرخ و به سیستم نظارت نمایش داده می‌شوند.                                                                                           |   3   |  V   |

---

## C7.2 شناسایی و کاهش هذیان

تخمین عدم قطعیت و استراتژی‌های پشتیبان، پاسخ‌های ساخته شده را کنترل می‌کنند.

|   #   | Description                                                                                                                                                     | Level | Role |
| :---: | --------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :--: |
| 7.2.1 | تأیید کنید که احتمال‌های لوگ در سطح توکن، انسجام خود الگوهای گروهی، یا آشکارسازهای هالوسیناسیون تنظیم‌شده، به هر پاسخ یک امتیاز اطمینان اختصاص می‌دهند.         |   1   | D/V  |
| 7.2.2 | تأیید کنید که پاسخ‌هایی با اطمینان کمتر از حد آستانه قابل تنظیم، فرآیندهای جایگزین (مانند تولید با افزایش بازیابی، مدل ثانویه، یا بازبینی انسانی) را فعال کنند. |   1   | D/V  |
| 7.2.3 | اطمینان حاصل کنید که موارد توهم با فراداده علت اصلی برچسب‌گذاری شده و به جریان‌های پسامدن و آموزش دقیق داده می‌شوند.                                            |   2   | D/V  |
| 7.2.4 | تأیید کنید که آستانه‌ها و آشکارسازها پس از به‌روزرسانی‌های عمده مدل یا پایگاه دانش مجدداً کالیبره شده‌اند.                                                      |   3   | D/V  |
| 7.2.5 | اطمینان حاصل کنید که تجسم‌های داشبورد نرخ‌های هذیان را رصد می‌کنند.                                                                                             |   3   |  V   |

---

## C7.3 فیلترگذاری ایمنی و حفظ حریم خصوصی خروجی

فیلترهای سیاستی و پوشش تیم قرمز از کاربران و داده‌های محرمانه محافظت می‌کنند.

|   #   | Description                                                                                                                                                         | Level | Role |
| :---: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :--: |
| 7.3.1 | تأیید کنید که طبقه‌بندی‌کننده‌های پیش و پس از تولید، محتوای نفرت‌انگیز، آزاردهنده، خودآسیب‌رسان، افراطی و مطالب جنسی صریح که با سیاست مطابقت دارد را مسدود می‌کنند. |   1   | D/V  |
| 7.3.2 | اطمینان حاصل کنید که شناسایی PII/PCI و اصلاح خودکار در هر پاسخ اجرا می‌شود؛ تخلفات منجر به بروز یک حادثه حریم خصوصی می‌شود.                                         |   1   | D/V  |
| 7.3.3 | تأیید کنید که برچسب‌های محرمانگی (مثلاً اسرار تجاری) در تمام حالت‌ها منتقل می‌شوند تا از نشت در متن، تصاویر یا کد جلوگیری شود.                                      |   2   |  D   |
| 7.3.4 | تأیید کنید که تلاش‌های عبور از فیلتر یا دسته‌بندی‌های با ریسک بالا نیازمند تأیید ثانویه یا احراز هویت مجدد کاربر باشند.                                             |   3   | D/V  |
| 7.3.5 | اطمینان حاصل کنید که آستانه‌های فیلترینگ منعکس‌کننده حوزه‌های قانونی و زمینه سنی/نقشی کاربران باشد.                                                                 |   3   | D/V  |

---

## C7.4 محدودسازی خروجی و اقدام

محدودیت‌های نرخ و دروازه‌های تأیید از سوءاستفاده و خودمختاری بیش از حد جلوگیری می‌کنند.

|   #   | Description                                                                                                                                               | Level | Role |
| :---: | --------------------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :--: |
| 7.4.1 | تأیید کنید که سهمیه‌های هر کاربر و هر کلید API درخواست‌ها، توکن‌ها و هزینه‌ها را محدود می‌کنند و در صورت خطای 429، با عقب‌نشینی نمایی برخورد می‌کنند.     |   1   |  D   |
| 7.4.2 | تأیید کنید که اقدامات دارای امتیاز ویژه (نوشتن فایل، اجرای کد، فراخوانی شبکه) نیازمند تأیید مبتنی بر سیاست یا دخالت انسان در فرآیند هستند.                |   1   | D/V  |
| 7.4.3 | تأیید کنید که بررسی‌های سازگاری میان‌مدلی اطمینان می‌دهد تصاویر، کد و متن تولید شده برای یک درخواست یکسان نمی‌توانند برای قاچاق محتوای مخرب استفاده شوند. |   2   | D/V  |
| 7.4.4 | تأیید کنید که عمق واگذاری نماینده، محدودیت‌های بازگشتی و فهرست ابزارهای مجاز به‌طور صریح پیکربندی شده‌اند.                                                |   2   |  D   |
| 7.4.5 | تأیید کنید که نقض محدودیت‌ها رویدادهای امنیتی ساختاریافته برای دریافت در سیستم SIEM ارسال می‌کند.                                                         |   3   |  V   |

---

## قابلیت توضیح خروجی C7.5

سیگنال‌های شفاف باعث افزایش اعتماد کاربران و تسهیل اشکال‌زدایی داخلی می‌شوند.

|   #   | Description                                                                                                                                            | Level | Role |
| :---: | ------------------------------------------------------------------------------------------------------------------------------------------------------ | :---: | :--: |
| 7.5.1 | اطمینان حاصل کنید که امتیازهای اطمینان نمایش داده شده برای کاربر یا خلاصه‌های کوتاه استدلال زمانی که ارزیابی ریسک مناسب تشخیص داده می‌شود، ارائه شوند. |   2   | D/V  |
| 7.5.2 | اطمینان حاصل کنید که توضیحات تولید شده از افشای دعوت‌نامه‌های سیستم حساس یا داده‌های مالکیتی خودداری می‌کنند.                                          |   2   | D/V  |
| 7.5.3 | تأیید کنید که سیستم احتمال‌های لگاریتمی در سطح توکن یا نقشه‌های توجه را ضبط کرده و آنها را برای بررسی‌های مجاز ذخیره می‌کند.                           |   3   |  D   |
| 7.5.4 | اطمینان حاصل کنید که مصنوعات قابل توضیح در کنار نسخه‌های مدل برای قابلیت حسابرسی، تحت کنترل نسخه قرار دارند.                                           |   3   |  V   |

---

## C7.6 یکپارچه‌سازی نظارت

قابلیت مشاهده به‌موقع حلقه بین توسعه و تولید را می‌بندد.

|   #   | Description                                                                                                                           | Level | Role |
| :---: | ------------------------------------------------------------------------------------------------------------------------------------- | :---: | :--: |
| 7.6.1 | تأیید کنید که معیارها (نقض الگو، نرخ توهم، سمی بودن، نشت اطلاعات شناسایی شخصی، تأخیر، هزینه) به یک پلتفرم نظارتی مرکزی ارسال می‌شوند. |   1   |  D   |
| 7.6.2 | تأیید کنید که آستانه‌های هشدار برای هر معیار ایمنی تعریف شده‌اند، همراه با مسیرهای ارتقاء تماس در مواقع اضطراری.                      |   1   |  V   |
| 7.6.3 | بررسی کنید که داشبوردها ناهنجاری‌های خروجی را با مدل/نسخه، پرچم ویژگی و تغییرات داده‌های بالادستی همبسته کنند.                        |   2   |  V   |
| 7.6.4 | تأیید کنید که داده‌های پایش‌شده در یک گردش کار مستند MLOps به بازآموزی، تنظیم دقیق یا به‌روزرسانی قوانین وارد می‌شوند.                |   2   | D/V  |
| 7.6.5 | اطمینان حاصل کنید که خط لوله‌های نظارتی از نظر نفوذپذیری آزمایش شده و کنترل دسترسی شده‌اند تا از نشت لاگ‌های حساس جلوگیری شود.        |   3   |  V   |

---

## ۷.۷ تدابیر حفاظتی رسانه‌های مولد

اطمینان حاصل کنید که سیستم‌های هوش مصنوعی محتوای رسانه‌ای غیرقانونی، مضر یا غیرمجاز تولید نکنند از طریق اعمال محدودیت‌های سیاستی، اعتبارسنجی خروجی و قابلیت ردیابی.

|   #   | Description                                                                                                                                                                                           | Level | Role |
| :---: | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :--: |
| 7.7.1 | تأیید کنید که دستورات سیستم و راهنمایی‌های کاربر به‌طور صریح تولید رسانه‌های دیپ‌فیک غیرقانونی، آسیب‌زا یا بدون رضایت (مانند تصویر، ویدئو، صدا) را ممنوع می‌کنند.                                     |   1   | D/V  |
| 7.7.2 | اطمینان حاصل کنید که درخواست‌ها برای تلاش در تولید تقلیدهای هویتی، تصاویر جعلی جنسی صریح، یا رسانه‌هایی که افراد واقعی را بدون رضایت نشان می‌دهند، فیلتر شده‌اند.                                     |   2   | D/V  |
| 7.7.3 | تأیید کنید که سیستم از هش ادراکی، تشخیص واترمارک، یا اثرانگشت دیجیتال برای جلوگیری از تکثیر غیرمجاز رسانه‌های دارای حق نشر استفاده می‌کند.                                                            |   2   |  V   |
| 7.7.4 | اطمینان حاصل کنید که تمام رسانه‌های تولید شده به صورت رمزنگاری شده امضا، دارای واترمارک، یا با متادیتای منشأ مقاوم در برابر دستکاری برای ردیابی‌های بعدی جاسازی شده‌اند.                              |   3   | D/V  |
| 7.7.5 | اطمینان حاصل کنید که تلاش‌های دور زدن (مانند مبهم‌سازی پرامپت، زبان عامیانه، جملات مخرب) شناسایی شده، ثبت شده و با محدودیت سرعت مدیریت می‌شوند؛ سوءاستفاده‌های مکرر به سیستم‌های نظارتی گزارش می‌شود. |   3   |  V   |

## مراجع

* [NIST AI Risk Management Framework](https://www.nist.gov/itl/ai-risk-management-framework)
* [ISO/IEC 42001:2023 – AI Management System](https://www.iso.org/obp/ui/en/)
* [OWASP Top-10 for Large Language Model Applications (2025)](https://owasp.org/www-project-top-10-for-large-language-model-applications/)
* [Improper Output Handling – OWASP LLM05:2025](https://genai.owasp.org/llmrisk/llm052025-improper-output-handling/)
* [Practical Techniques to Constrain LLM Output](https://mychen76.medium.com/practical-techniques-to-constraint-llm-output-in-json-format-e3e72396c670)
* [Dataiku – Structured Text Generation Guide](https://blog.dataiku.com/your-guide-to-structured-text-generation)
* [VL-Uncertainty: Detecting Hallucinations](https://arxiv.org/abs/2411.11919)
* [HaDeMiF: Hallucination Detection & Mitigation](https://openreview.net/forum?id=VwOYxPScxB)
* [Building Confidence in LLM Outputs](https://www.alkymi.io/data-science-room/building-confidence-in-llm-outputs)
* [Explainable AI & LLMs](https://duncsand.medium.com/explainable-ai-140912d31b3b)
* [LLM Red-Teaming Guide](https://www.confident-ai.com/blog/red-teaming-llms-a-step-by-step-guide)
* [Sensitive Information Disclosure in LLMs](https://virtualcyberlabs.com/llm-sensitive-information-disclosure/)
* [LangChain – Chat Model Rate Limiting](https://python.langchain.com/docs/how_to/chat_model_rate_limiting/)
* [OpenAI Rate-Limit & Exponential Back-off](https://hackernoon.com/openais-rate-limit-a-guide-to-exponential-backoff-for-llm-evaluation)
* [Arize AI – LLM Observability Platform](https://arize.com/)

