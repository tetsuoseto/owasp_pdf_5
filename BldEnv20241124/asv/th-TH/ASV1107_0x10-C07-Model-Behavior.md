# พฤติกรรมของโมเดล C7 การควบคุมผลลัพธ์ และการรับประกันความปลอดภัย

## วัตถุประสงค์การควบคุม

ผลลัพธ์ของโมเดลต้องมีโครงสร้างที่ชัดเจน เชื่อถือได้ ปลอดภัย อธิบายได้ และมีการติดตามอย่างต่อเนื่องในการใช้งานจริง การทำเช่นนี้จะช่วยลดความผิดพลาดในข้อมูล รั่วไหลของข้อมูลส่วนบุคคล เนื้อหาที่เป็นอันตราย และการกระทำที่ไม่ได้ควบคุม ในขณะเดียวกันก็เพิ่มความไว้วางใจของผู้ใช้และความสอดคล้องกับข้อกำหนดทางกฎหมาย

---

## C7.1 การบังคับใช้รูปแบบผลลัพธ์

สคีมาเข้มงวด การถอดรหัสแบบจำกัด และการตรวจสอบผลลัพธ์ช่วยหยุดเนื้อหาที่ผิดรูปหรือเป็นอันตรายก่อนที่จะกระจายออกไป

|   #   | Description                                                                                                                                                                 | Level | Role |
| :---: | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :--: |
| 7.1.1 | ตรวจสอบให้แน่ใจว่าสคีมาของการตอบสนอง (เช่น JSON Schema) ถูกกำหนดไว้ในคำสั่งระบบ และผลลัพธ์ทุกครั้งจะถูกตรวจสอบโดยอัตโนมัติ; ผลลัพธ์ที่ไม่ตรงตามแบบจะถูกแก้ไขหรือปฏิเสธทันที |   1   | D/V  |
| 7.1.2 | ตรวจสอบให้แน่ใจว่าการถอดรหัสแบบจำกัด (โทเค็นหยุด, regex, จำนวนโทเค็นสูงสุด) ถูกเปิดใช้งานเพื่อป้องกันการล้นข้อมูลหรือช่องโหว่จากการฉีดคำสั่งในคำถาม                         |   1   | D/V  |
| 7.1.3 | ตรวจสอบให้แน่ใจว่าส่วนประกอบด้านล่างรับข้อมูลผลลัพธ์เป็นข้อมูลที่ไม่น่าเชื่อถือและทำการตรวจสอบตามแบบแผนหรือใช้ตัวถอดรหัสที่ปลอดภัยจากการโจมตีแบบ Injection                  |   2   | D/V  |
| 7.1.4 | ตรวจสอบให้แน่ใจว่าเหตุการณ์ที่ส่งผลลัพธ์ไม่ถูกต้องถูกบันทึก จำกัดอัตราการเกิด และแสดงผลในระบบการตรวจสอบ                                                                     |   3   |  V   |

---

## C7.2 การตรวจจับและบรรเทาภาพหลอน

การประเมินความไม่แน่นอนและกลยุทธ์การสำรองช่วยลดคำตอบที่ถูกประดิษฐ์ขึ้น

|   #   | Description                                                                                                                                                                                                                                                 | Level | Role |
| :---: | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :--: |
| 7.2.1 | ตรวจสอบให้แน่ใจว่า โอกาสล็อกแต่ละโทเค็น (token-level log-probabilities), ความสม่ำเสมอของกลุ่มแบบรวม (ensemble self-consistency), หรือเครื่องตรวจจับฮัลลูซิเนชันที่ผ่านการปรับแต่ง (fine-tuned hallucination detectors) กำหนดคะแนนความมั่นใจให้กับแต่ละคำตอบ |   1   | D/V  |
| 7.2.2 | ตรวจสอบให้แน่ใจว่าคำตอบที่อยู่ต่ำกว่าค่าความเชื่อมั่นที่ตั้งค่าได้จะกระตุ้นกระบวนการทำงานสำรอง (เช่น การสร้างเนื้อหาที่เสริมด้วยการค้นคืน, แบบจำลองรอง หรือการตรวจสอบโดยมนุษย์)                                                                             |   1   | D/V  |
| 7.2.3 | ตรวจสอบให้แน่ใจว่าเหตุการณ์ฮัลลูซิเนชันถูกติดแท็กด้วยเมตาดาต้าสาเหตุหลักและถูกป้อนเข้าสู่กระบวนการวิเคราะห์หลังเหตุการณ์และการปรับแต่งแบบจำลอง                                                                                                              |   2   | D/V  |
| 7.2.4 | ตรวจสอบให้แน่ใจว่าได้ปรับเทียบเกณฑ์และเครื่องตรวจจับใหม่หลังจากการอัปเดตโมเดลหรือฐานความรู้ครั้งใหญ่แล้ว                                                                                                                                                    |   3   | D/V  |
| 7.2.5 | ตรวจสอบให้แน่ใจว่าการแสดงผลบนแดชบอร์ด ติดตามอัตราการเกิดฮัลูซิเนชัน (hallucination)                                                                                                                                                                         |   3   |  V   |

---

## C7.3 การกรองความปลอดภัยและความเป็นส่วนตัวของผลลัพธ์

ตัวกรองนโยบายและการปกป้องทีมแดงช่วยปกป้องผู้ใช้และข้อมูลที่เป็นความลับ

|   #   | Description                                                                                                                                                                      | Level | Role |
| :---: | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :--: |
| 7.3.1 | ตรวจสอบให้แน่ใจว่าตัวจำแนกก่อนและหลังการสร้างป้องกันเนื้อหาที่เป็นความเกลียดชัง การล่วงละเมิด การทำร้ายตนเอง เนื้อหาซูเปอร์หัวรุนแรง และเนื้อหาที่ลามกอนาจารที่สอดคล้องกับนโยบาย |   1   | D/V  |
| 7.3.2 | ตรวจสอบให้แน่ใจว่าการตรวจจับ PII/PCI และการปกปิดโดยอัตโนมัติทำงานในทุกคำตอบ; การละเมิดจะเป็นเหตุให้เกิดเหตุการณ์ด้านความเป็นส่วนตัวขึ้น                                          |   1   | D/V  |
| 7.3.3 | ตรวจสอบให้แน่ใจว่าแท็กความลับ (เช่น ความลับทางการค้า) ถูกส่งผ่านข้ามรูปแบบข้อมูลเพื่อป้องกันการรั่วไหลในข้อความ รูปภาพ หรือโค้ด                                                  |   2   |  D   |
| 7.3.4 | ตรวจสอบให้แน่ใจว่าการพยายามหลีกเลี่ยงตัวกรองหรือลักษณะการจำแนกความเสี่ยงสูงต้องได้รับการอนุมัติขั้นที่สองหรือต้องมีการตรวจสอบสิทธิ์ผู้ใช้ซ้ำ                                     |   3   | D/V  |
| 7.3.5 | ตรวจสอบให้แน่ใจว่าค่าขีดจำกัดการกรองสอดคล้องกับเขตอำนาจทางกฎหมายและบริบทของอายุ/บทบาทของผู้ใช้                                                                                   |   3   | D/V  |

---

## C7.4 การจำกัดผลลัพธ์และการกระทำ

ข้อจำกัดอัตราการใช้งานและเกตการอนุมัติช่วยป้องกันการใช้งานในทางที่ผิดและการทำงานอัตโนมัติเกินขอบเขต

|   #   | Description                                                                                                                                                           | Level | Role |
| :---: | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :--: |
| 7.4.1 | ตรวจสอบให้แน่ใจว่าข้อจำกัดโควตาของแต่ละผู้ใช้และแต่ละคีย์ API จำกัดคำร้องขอ โทเค็น และค่าใช้จ่าย โดยมีการหน่วงเวลาถอยหลังแบบทวีคูณเมื่อเกิดข้อผิดพลาด 429             |   1   |  D   |
| 7.4.2 | ตรวจสอบให้แน่ใจว่าการกระทำที่มีสิทธิพิเศษ (การเขียนไฟล์ การรันโค้ด การเรียกใช้งานเครือข่าย) จำเป็นต้องได้รับการอนุมัติตามนโยบายหรือการมีมนุษย์เป็นส่วนร่วมในกระบวนการ |   1   | D/V  |
| 7.4.3 | ตรวจสอบให้แน่ใจว่าการตรวจสอบความสอดคล้องข้ามโหมดช่วยให้ภาพ รหัส และข้อความที่สร้างขึ้นสำหรับคำขอเดียวกันไม่สามารถนำมาใช้ลักลอบนำเนื้อหาที่เป็นอันตรายเข้าไปได้        |   2   | D/V  |
| 7.4.4 | ตรวจสอบให้แน่ใจว่ามีการกำหนดความลึกของการมอบหมายตัวแทน ขีดจำกัดการเรียกซ้ำ และรายการเครื่องมือที่อนุญาตไว้อย่างชัดเจนแล้ว                                             |   2   |  D   |
| 7.4.5 | ตรวจสอบให้แน่ใจว่าการละเมิดขีดจำกัดส่งเหตุการณ์ความปลอดภัยที่มีโครงสร้างสำหรับการนำเข้า SIEM                                                                          |   3   |  V   |

---

## C7.5 การอธิบายผลลัพธ์

สัญญาณที่โปร่งใสช่วยเพิ่มความเชื่อมั่นของผู้ใช้และการแก้ไขปัญหาภายใน

|   #   | Description                                                                                                                                   | Level | Role |
| :---: | --------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :--: |
| 7.5.1 | ตรวจสอบให้แน่ใจว่าคะแนนความมั่นใจที่มองเห็นโดยผู้ใช้หรือสรุปเหตุผลสั้น ๆ แสดงออกเมื่อการประเมินความเสี่ยงเห็นว่าเหมาะสม                       |   2   | D/V  |
| 7.5.2 | ตรวจสอบให้แน่ใจว่าการอธิบายที่สร้างขึ้นหลีกเลี่ยงการเปิดเผยคำสั่งระบบที่ละเอียดอ่อนหรือข้อมูลทรัพย์สินเฉพาะ                                   |   2   | D/V  |
| 7.5.3 | ตรวจสอบให้แน่ใจว่าระบบบันทึกความน่าจะเป็นระดับโทเค็นหรือแผนที่การให้ความสนใจ และจัดเก็บไว้เพื่อการตรวจสอบที่ได้รับอนุญาต                      |   3   |  D   |
| 7.5.4 | ตรวจสอบให้แน่ใจว่าวัสดุอธิบาย (explainability artefacts) ถูกควบคุมเวอร์ชันควบคู่กับการปล่อยโมเดลเพื่อความสามารถในการตรวจสอบได้ (auditability) |   3   |  V   |

---

## C7.6 การรวมการตรวจสอบ

การสังเกตการณ์แบบเรียลไทม์ช่วยปิดวงจรระหว่างการพัฒนาและการผลิต

|   #   | Description                                                                                                                                                                 | Level | Role |
| :---: | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :--: |
| 7.6.1 | ตรวจสอบให้แน่ใจว่าเมตริก (การละเมิดสคีมา อัตราการสร้างข้อมูลเท็จ ความเป็นพิษ การรั่วไหลของข้อมูลส่วนบุคคล ความล่าช้า ค่าใช้จ่าย) ถูกส่งไปยังแพลตฟอร์มการเฝ้าติดตามศูนย์กลาง |   1   |  D   |
| 7.6.2 | ตรวจสอบให้แน่ใจว่าได้กำหนดเกณฑ์การแจ้งเตือนสำหรับแต่ละมาตรวัดความปลอดภัย พร้อมเส้นทางการแจ้งเตือนต่อสายด่วนในกรณีฉุกเฉิน                                                    |   1   |  V   |
| 7.6.3 | ตรวจสอบให้แน่ใจว่าแดชบอร์ดสัมพันธ์ความผิดปกติของผลลัพธ์กับโมเดล/เวอร์ชัน, ฟีเจอร์แฟลก, และการเปลี่ยนแปลงข้อมูลจากต้นทาง                                                     |   2   |  V   |
| 7.6.4 | ตรวจสอบให้แน่ใจว่าข้อมูลการตรวจสอบจะถูกป้อนกลับเพื่อฝึกอบรมใหม่ ปรับจูน หรืออัปเดตกฎภายในเวิร์กโฟลว์ MLOps ที่มีเอกสารครบถ้วน                                               |   2   | D/V  |
| 7.6.5 | ตรวจสอบให้แน่ใจว่าเส้นทางการตรวจสอบได้รับการทดสอบเจาะระบบและควบคุมการเข้าถึงเพื่อป้องกันการรั่วไหลของบันทึกที่ละเอียดอ่อน                                                   |   3   |  V   |

---

## 7.7 การป้องกันสื่อสร้างสรรค์

ตรวจสอบให้แน่ใจว่าระบบปัญญาประดิษฐ์ (AI) ไม่สร้างเนื้อหาสื่อที่ผิดกฎหมาย เป็นอันตราย หรือไม่ได้รับอนุญาตโดยการบังคับใช้ข้อกำหนดนโยบาย การตรวจสอบผลลัพธ์ และการติดตามย้อนกลับได้

|   #   | Description                                                                                                                                                                           | Level | Role |
| :---: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :--: |
| 7.7.1 | ตรวจสอบให้แน่ใจว่าคำสั่งระบบและคำแนะนำผู้ใช้ห้ามอย่างชัดเจนในการสร้างสื่อดีปเฟคที่ผิดกฎหมาย เป็นอันตราย หรือไม่มีความยินยอม (เช่น ภาพ วิดีโอ เสียง)                                   |   1   | D/V  |
| 7.7.2 | ตรวจสอบให้แน่ใจว่าคำสั่งถูกกรองเพื่อป้องกันการพยายามสร้างการปลอมแปลงตัวตน, สื่อที่มีเนื้อหาเชิงลามกอนาจารแบบลึก, หรือสื่อที่แสดงบุคคลจริงโดยไม่ได้รับอนุญาต                           |   2   | D/V  |
| 7.7.3 | ตรวจสอบให้แน่ใจว่าระบบใช้การแฮชเชิงการรับรู้ (perceptual hashing), การตรวจจับลายน้ำ, หรือการสร้างลายนิ้วมือ (fingerprinting) เพื่อป้องกันการทำซ้ำสื่อที่มีลิขสิทธิ์โดยไม่ได้รับอนุญาต |   2   |  V   |
| 7.7.4 | ตรวจสอบให้แน่ใจว่าสื่อที่สร้างขึ้นทั้งหมดมีลายเซ็นทางคริปโตกราฟี ประทับลายน้ำ หรือฝังข้อมูลเมตาเกี่ยวกับแหล่งที่มาแบบต้านการปลอมแปลงเพื่อให้สามารถตรวจสอบย้อนหลังได้                  |   3   | D/V  |
| 7.7.5 | ตรวจสอบให้แน่ใจว่าการพยายามเลี่ยง (เช่น การปกปิดคำสั่ง, สแลง, การวางคำที่มีเจตนาท้าทาย) ถูกตรวจจับ บันทึก และจำกัดอัตรา; การใช้งานผิดซ้ำ ๆ จะถูกแจ้งไปยังระบบการตรวจสอบ               |   3   |  V   |

## เอกสารอ้างอิง

* [NIST AI Risk Management Framework](https://www.nist.gov/itl/ai-risk-management-framework)
* [ISO/IEC 42001:2023 – AI Management System](https://www.iso.org/obp/ui/en/)
* [OWASP Top-10 for Large Language Model Applications (2025)](https://owasp.org/www-project-top-10-for-large-language-model-applications/)
* [Improper Output Handling – OWASP LLM05:2025](https://genai.owasp.org/llmrisk/llm052025-improper-output-handling/)
* [Practical Techniques to Constrain LLM Output](https://mychen76.medium.com/practical-techniques-to-constraint-llm-output-in-json-format-e3e72396c670)
* [Dataiku – Structured Text Generation Guide](https://blog.dataiku.com/your-guide-to-structured-text-generation)
* [VL-Uncertainty: Detecting Hallucinations](https://arxiv.org/abs/2411.11919)
* [HaDeMiF: Hallucination Detection & Mitigation](https://openreview.net/forum?id=VwOYxPScxB)
* [Building Confidence in LLM Outputs](https://www.alkymi.io/data-science-room/building-confidence-in-llm-outputs)
* [Explainable AI & LLMs](https://duncsand.medium.com/explainable-ai-140912d31b3b)
* [LLM Red-Teaming Guide](https://www.confident-ai.com/blog/red-teaming-llms-a-step-by-step-guide)
* [Sensitive Information Disclosure in LLMs](https://virtualcyberlabs.com/llm-sensitive-information-disclosure/)
* [LangChain – Chat Model Rate Limiting](https://python.langchain.com/docs/how_to/chat_model_rate_limiting/)
* [OpenAI Rate-Limit & Exponential Back-off](https://hackernoon.com/openais-rate-limit-a-guide-to-exponential-backoff-for-llm-evaluation)
* [Arize AI – LLM Observability Platform](https://arize.com/)

